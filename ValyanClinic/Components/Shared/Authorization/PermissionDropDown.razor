@namespace ValyanClinic.Components.Shared.Authorization
@using ValyanClinic.Application.Interfaces
@using Syncfusion.Blazor.DropDowns
@typeparam TValue
@typeparam TItem

@* 
    PermissionDropDown - DropDownList cu verificare automată de permisiuni.
*@

@if (_fieldState != FieldState.Hidden)
{
    <div class="form-group @CssClass">
        @if (!string.IsNullOrEmpty(Label))
        {
            <label for="@Id">
                @if (Required)
                {
                    <span class="required">*</span>
                }
                @Label
            </label>
        }
        
        <SfDropDownList TValue="TValue"
                        TItem="TItem"
                        ID="@Id"
                        @bind-Value="Value"
                        DataSource="@DataSource"
                        Placeholder="@Placeholder"
                        Readonly="@IsReadOnly"
                        Enabled="@IsEnabled"
                        AllowFiltering="@AllowFiltering"
                        ShowClearButton="@ShowClearButton"
                        CssClass="@GetInputCssClass()">
            <DropDownListFieldSettings Text="@TextField" Value="@ValueField" />
        </SfDropDownList>
        
        @if (!string.IsNullOrEmpty(HelpText))
        {
            <small class="form-text text-muted">@HelpText</small>
        }
        
        @if (_fieldState == FieldState.ReadOnly && ShowReadOnlyMessage)
        {
            <small class="form-text text-warning">
                <i class="fas fa-lock"></i> Nu aveți permisiunea de a edita acest câmp
            </small>
        }
    </div>
}
