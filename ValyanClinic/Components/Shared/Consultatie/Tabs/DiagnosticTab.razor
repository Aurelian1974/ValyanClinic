@*
    Tab pentru Diagnostic & Tratament
    ✅ UPDATED: Split in diagnostic principal + diagnostice secundare cu coduri ICD-10
*@
@using ValyanClinic.Components.Shared.Consultatie

<div class="tab-content-section">
    <div class="section-title">
        <i class="fas fa-diagnoses"></i>
        <h4>Diagnostic & Tratament</h4>
    </div>
    
    <!-- ==================== DIAGNOSTICE - 2 COLOANE ==================== -->
    <div class="diagnostics-two-columns">
        <!-- COLOANA STÂNGA: DIAGNOSTIC PRINCIPAL -->
        <div class="diagnostic-column primary-column">
            <div class="form-section">
                <PrimaryDiagnosisSelector @bind-SelectedCode="PrimaryDiagnosisCode"
                                          @bind-DiagnosisDetails="PrimaryDiagnosisDetails"
                                          CurrentUserId="@CurrentUserId"
                                          ShowValidation="@ShowValidation"
                                          OnChanged="@OnFieldChanged" />
            </div>
        </div>
        
        <!-- COLOANA DREAPTA: DIAGNOSTICE SECUNDARE -->
        <div class="diagnostic-column secondary-column">
            <div class="form-section">
                <SecondaryDiagnosesList @bind-SecondaryDiagnoses="SecondaryDiagnosesList"
                                        CurrentUserId="@CurrentUserId"
                                        ShowValidation="@ShowValidation"
                                        OnChanged="@OnFieldChanged" />
            </div>
        </div>
    </div>

    <!-- ==================== SECȚIUNEA 3: TRATAMENT - MEDICAMENTE PRESCRISE ==================== -->
    
    <MedicationList @bind-Medications="MedicationsList"
                    ShowValidation="@ShowValidation"
                    OnChanged="@OnFieldChanged" />
    
    <!-- Section Completed Indicator -->
    @if (OnSectionCompleted.HasDelegate && IsComplete)
    {
        <div class="section-complete-indicator">
            <i class="fas fa-check-circle"></i>
            <span>Secțiune completată</span>
        </div>
    }
</div>
